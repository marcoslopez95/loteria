import{d as $,B as c,p as N,c as g,a,b as t,u as s,h as B,t as u,w as i,g as d,l as h,o as b,F as _,r as E,G as S,D as j,H as D,m as F,j as G}from"./app-BQykWeyp.js";import{_ as M}from"./index-CS7udaKa.js";import{_ as O}from"./Input.vue_vue_type_script_setup_true_lang-BI3b7YCV.js";import{_ as P}from"./Label.vue_vue_type_script_setup_true_lang-CjFjXSyl.js";import{_ as w}from"./InputError.vue_vue_type_script_setup_true_lang-BMFiR3LZ.js";import{a as z,u as A}from"./index-DeaJdLL4.js";import{d as T}from"./index-Dhq0cQs_.js";import"./Primitive-mBBXJQJs.js";import"./useForwardExpose-K1HLZKpI.js";import"./index-CMWG4mbA.js";const U={class:"mx-auto max-w-6xl p-6"},H={class:"mb-6 flex items-center justify-between"},L={class:"text-2xl font-semibold"},q={class:"flex items-center gap-2"},I={class:"rounded-lg border bg-white/50 p-4 dark:bg-white/5"},J={class:"grid gap-2",style:{"grid-template-columns":"repeat(auto-fill, minmax(60px, 1fr))"}},K=["onClick"],Q={class:"mt-3 text-sm"},R={class:"grid gap-3 rounded-lg border bg-white/50 p-4 dark:bg-white/5"},W={class:"flex items-center gap-2"},X={class:"flex items-center justify-end gap-3"},ie=$({__name:"Edit",props:{order:{}},setup(n){const x=n,f=c(!1),p=c(x.order.notes??""),k=Array.from({length:1e3},(o,e)=>String(e).padStart(3,"0")),l=c(new Set(x.order.items.map(o=>o.number)));function y(o){l.value.has(o)?l.value.delete(o):l.value.add(o)}const C=N(()=>(l.value.size*5).toFixed(2));function V(){const e={items:Array.from(l.value).map(m=>({number:m})),notes:p.value};return f.value&&(e.status="Cancelada"),e}return(o,e)=>(b(),g(_,null,[a(s(B),{title:`Editar Orden #${n.order.id}`},null,8,["title"]),t("div",U,[t("div",H,[t("h1",L,"Editar Orden #"+u(n.order.id),1),t("div",q,[a(s(h),{href:s(T)(),class:"rounded-md border px-3 py-2"},{default:i(()=>[...e[2]||(e[2]=[d("Menú principal",-1)])]),_:1},8,["href"]),a(s(h),{href:s(z)([n.order.id]).url,class:"rounded-md border px-3 py-2"},{default:i(()=>[...e[3]||(e[3]=[d("Volver a orden",-1)])]),_:1},8,["href"])])]),a(s(G),F(s(A).form([n.order.id]),{transform:()=>V(),class:"grid gap-8"}),{default:i(({errors:m,processing:v})=>[t("section",I,[e[7]||(e[7]=t("h2",{class:"mb-3 text-lg font-medium"},"Números",-1)),t("div",J,[(b(!0),g(_,null,E(s(k),r=>(b(),g("button",{key:r,type:"button",class:S(["rounded-md px-2 py-2 text-sm font-semibold ring-1 transition",l.value.has(r)?"bg-teal-600 text-white ring-teal-700":"bg-white dark:bg-white/10 text-teal-900 dark:text-white ring-black/10 dark:ring-white/10 hover:bg-black/5 dark:hover:bg-white/15"]),onClick:Y=>y(r)},u(r),11,K))),128))]),a(w,{message:m.items},null,8,["message"]),t("p",Q,[e[4]||(e[4]=d("Precio por número: ",-1)),e[5]||(e[5]=t("strong",null,"$5.00",-1)),e[6]||(e[6]=d(" — Total: ",-1)),t("strong",null,"$"+u(C.value),1)])]),t("section",R,[t("div",null,[a(s(P),{for:"notes"},{default:i(()=>[...e[8]||(e[8]=[d("Notas",-1)])]),_:1}),a(s(O),{id:"notes",modelValue:p.value,"onUpdate:modelValue":e[0]||(e[0]=r=>p.value=r),placeholder:"Notas internas (opcional)"},null,8,["modelValue"]),a(w,{message:m.notes},null,8,["message"])]),t("label",W,[j(t("input",{type:"checkbox","onUpdate:modelValue":e[1]||(e[1]=r=>f.value=r)},null,512),[[D,f.value]]),e[9]||(e[9]=t("span",null,"Marcar como Cancelada",-1))])]),t("div",X,[a(s(M),{type:"submit",disabled:v},{default:i(()=>[d(u(v?"Guardando...":"Guardar cambios"),1)]),_:2},1032,["disabled"])])]),_:1},16,["transform"])])],64))}});export{ie as default};
